p8105_hw2_yw3996
================
Yiying Wu

Load R packages

``` r
library(tidyverse)
```

## Problem 1: FiveThirtyEight data

Clean the data in `pols-month.csv`:

-   Use `separate()` to break up the variable `mon` into integer
    variables `year`, `month`, and `day`
-   Replace month number with month name
-   Create a `president` variable taking values `gop` and `dem`, and
    remove `prez_dem` and `prez_gop`
-   Remove the `day` variable.

``` r
pols_month = read_csv("./fivethirtyeight_datasets/pols-month.csv")|>
  janitor::clean_names()|>
  separate(mon,into=c("year","month","day"),)|>
  mutate(month = month.name[as.numeric(month)],
         president=case_match(
           prez_dem,
           1~"democratic",
           0~"republican"
           )
        )|>
  select(-prez_dem,-prez_gop,-day)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
head(pols_month)
```

    ## # A tibble: 6 × 9
    ##   year  month    gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president 
    ##   <chr> <chr>      <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>     
    ## 1 1947  January       23      51     253      23      45     198 democratic
    ## 2 1947  February      23      51     253      23      45     198 democratic
    ## 3 1947  March         23      51     253      23      45     198 democratic
    ## 4 1947  April         23      51     253      23      45     198 democratic
    ## 5 1947  May           23      51     253      23      45     198 democratic
    ## 6 1947  June          23      51     253      23      45     198 democratic

Clean the data in `snp.csv` using a similar process to the above,
arrange according to year and month, and organize so that year and month
are the leading columns.

``` r
snp = read_csv("./fivethirtyeight_datasets/snp.csv")|>
  janitor::clean_names()|>
  mutate(
    date=ifelse(as.Date(date,"%m/ %d/ %y")> Sys.Date(),
                format(as.Date(date,"%m/ %d/ %y"),'19%y-%m-%d'),
                format(as.Date(date,"%m/ %d/ %y"),'%Y-%m-%d'))
        )|>
  separate(date,into=c("year","month","day"),)|>
  mutate(month = month.name[as.numeric(month)])|>
  select(year,month, everything(),-day)
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
head(snp)
```

    ## # A tibble: 6 × 3
    ##   year  month    close
    ##   <chr> <chr>    <dbl>
    ## 1 2015  July     2080.
    ## 2 2015  June     2063.
    ## 3 2015  May      2107.
    ## 4 2015  April    2086.
    ## 5 2015  March    2068.
    ## 6 2015  February 2104.

tidy the `unemployment` data so that it can be merged with the previous
datasets:

-   switching from “wide” to “long” format
-   ensuring that key variables have the same name
-   ensuring that key variables take the same values

``` r
unemployment = read_csv("./fivethirtyeight_datasets/unemployment.csv")|>
  pivot_longer(
    Jan:Dec,
    names_to = "month", 
    values_to = "unemployment")|>
  janitor::clean_names()|>
  mutate(month=month.name[match(month,month.abb)])|>
  mutate(year=as.character(year))
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
head(unemployment)
```

    ## # A tibble: 6 × 3
    ##   year  month    unemployment
    ##   <chr> <chr>           <dbl>
    ## 1 1948  January           3.4
    ## 2 1948  February          3.8
    ## 3 1948  March             4  
    ## 4 1948  April             3.9
    ## 5 1948  May               3.5
    ## 6 1948  June              3.6

Join the datasets by merging `snp` into `pols_month`, and merging
`unemployment` into the result.

``` r
df=pols_month|>
  full_join(snp,by=c("year", "month"))|>
  full_join(unemployment, by=c("year", "month"))

head(df)
```

    ## # A tibble: 6 × 11
    ##   year  month    gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president close
    ##   <chr> <chr>      <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>     <dbl>
    ## 1 1947  January       23      51     253      23      45     198 democrat…    NA
    ## 2 1947  February      23      51     253      23      45     198 democrat…    NA
    ## 3 1947  March         23      51     253      23      45     198 democrat…    NA
    ## 4 1947  April         23      51     253      23      45     198 democrat…    NA
    ## 5 1947  May           23      51     253      23      45     198 democrat…    NA
    ## 6 1947  June          23      51     253      23      45     198 democrat…    NA
    ## # ℹ 1 more variable: unemployment <dbl>
